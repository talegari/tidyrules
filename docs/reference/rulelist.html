<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Rulelist — rulelist • tidyrules</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Rulelist — rulelist"><meta property="og:description" content="

Structure


A rulelist is ordered list of rules stored as a dataframe. Each row,
specifies a rule (LHS), expected outcome (RHS) and some other details.
It has these mandatory columns:
rule_nbr: (integer vector) Rule number
LHS: (character vector) A rule is a string that can be parsed using base::parse()
RHS: (character vector or a literal)





Example


| rule_nbr|LHS                                                                  |RHS       | support| confidence|     lift|
|--------:|:--------------------------------------------------------------------|:---------|-------:|----------:|--------:|
|        1|( island %in% c('Biscoe') ) &amp;amp; ( flipper_length_mm &amp;gt; 203 )            |Gentoo    |     122|  1.0000000| 2.774193|
|        2|( island %in% c('Biscoe') ) &amp;amp; ( flipper_length_mm &amp;lt;= 203 )           |Adelie    |      46|  0.9565217| 2.164760|
|        3|( island %in% c('Dream', 'Torgersen') ) &amp;amp; ( bill_length_mm &amp;gt; 44.1 )  |Chinstrap |      65|  0.9538462| 4.825339|
|        4|( island %in% c('Dream', 'Torgersen') ) &amp;amp; ( bill_length_mm &amp;lt;= 44.1 ) |Adelie    |     111|  0.9459459| 2.140825|




Create a rulelist


A rulelist can be created using tidy() on some supported model fits
(run: utils::methods(tidy)). It can also be created manually from a
existing dataframe using as_rulelist.



Keys and attributes


Columns identified as 'keys' along with rule_nbr form a unique
combination
-- a group of rules. For example, rule-based C5 model with multiple trials
creates rules per each trial_nbr. predict method understands 'keys',
thereby provides/predicts a rule number (for each row in new data / test
data) within the same trial_nbr.
A rulelist has these mandatory attributes:
estimation_type: One among regression, classification
A rulelist has these optional attributes:
keys: (character vector)Names of the column that forms a key.
model_type: (string) Name of the model



Set Validation data


This helps a few methods like augment, calculate, prune, reorder
require few additional attributes which can be set using
set_validation_data.



Methods for rulelist


Predict: Given a dataframe (possibly without a
dependent variable column aka 'test data'), predicts the first rule (as
ordered in the rulelist) per 'keys' that is applicable for each row. When
multiple = TRUE, returns all rules applicable for a row (per key).
Augment: Outputs summary statistics per rule over
validation data and returns a rulelist with a new dataframe-column.
Calculate: Computes metrics for a rulelist in a
cumulative manner such as cumulative_coverage, cumulative_overlap,
cumulative_accuracy.
Prune: Suggests pruning a rulelist such that some
expectation are met (based on metrics). Example: cumulative_coverage of 80%
can be met with a first few rules.
Reorder: Reorders a rulelist in order to maximize a
metric.





Manipulating a rulelist


Rulelists are essentially dataframes. Hence, any dataframe operations which
preferably preserve attributes will output a rulelist. as_rulelist and
as.data.frame will help in moving back and forth between rulelist and
dataframe worlds.



Utilities for a rulelist


as_rulelist: Create a rulelist from a
dataframe with some mandatory columns.
set_keys: Set or Unset 'keys' of a rulelist.
to_sql_case: Outputs a SQL case statement for a rulelist.
convert_rule_flavor: Converts R-parsable rule strings to python/SQL
parsable rule strings.





"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidyrules</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/using_tidyrules.html">Using tidyrules</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/talegari/tidyrules/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Rulelist</h1>
    <small class="dont-index">Source: <a href="https://github.com/talegari/tidyrules/blob/HEAD/R/rulelist.R" class="external-link"><code>R/rulelist.R</code></a></small>
    <div class="hidden name"><code>rulelist.Rd</code></div>
    </div>

    <div class="ref-description">
    
<div class="section">
<h3 id="structure">Structure<a class="anchor" aria-label="anchor" href="#structure"></a></h3>


<p>A <code>rulelist</code> is ordered list of rules stored as a dataframe. Each row,
specifies a rule (LHS), expected outcome (RHS) and some other details.</p>
<p>It has these mandatory columns:</p><ul><li><p><code>rule_nbr</code>: (integer vector) Rule number</p></li>
<li><p><code>LHS</code>: (character vector) A rule is a string that can be parsed using <code><a href="https://rdrr.io/r/base/parse.html" class="external-link">base::parse()</a></code></p></li>
<li><p><code>RHS</code>: (character vector or a literal)</p></li>
</ul></div>

<div class="section">
<h3 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a></h3>


<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="sc">|</span> rule_nbr<span class="sc">|</span>LHS                                                                  <span class="sc">|</span>RHS       <span class="sc">|</span> support<span class="sc">|</span> confidence<span class="sc">|</span>     lift<span class="sc">|</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="er">|</span><span class="sc">--------</span><span class="er">:|:</span><span class="sc">--------------------------------------------------------------------</span><span class="er">|:</span><span class="sc">---------</span><span class="er">|</span><span class="sc">-------</span><span class="er">:|</span><span class="sc">----------</span><span class="er">:|</span><span class="sc">--------</span><span class="er">:|</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="er">|</span>        <span class="dv">1</span><span class="sc">|</span>( island <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'Biscoe'</span>) ) <span class="sc">&amp;</span> ( flipper_length_mm <span class="sc">&gt;</span> <span class="dv">203</span> )            <span class="sc">|</span>Gentoo    <span class="sc">|</span>     <span class="dv">122</span><span class="sc">|</span>  <span class="fl">1.0000000</span><span class="sc">|</span> <span class="fl">2.774193</span><span class="sc">|</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="er">|</span>        <span class="dv">2</span><span class="sc">|</span>( island <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'Biscoe'</span>) ) <span class="sc">&amp;</span> ( flipper_length_mm <span class="sc">&lt;=</span> <span class="dv">203</span> )           <span class="sc">|</span>Adelie    <span class="sc">|</span>      <span class="dv">46</span><span class="sc">|</span>  <span class="fl">0.9565217</span><span class="sc">|</span> <span class="fl">2.164760</span><span class="sc">|</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="er">|</span>        <span class="dv">3</span><span class="sc">|</span>( island <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'Dream'</span>, <span class="st">'Torgersen'</span>) ) <span class="sc">&amp;</span> ( bill_length_mm <span class="sc">&gt;</span> <span class="fl">44.1</span> )  <span class="sc">|</span>Chinstrap <span class="sc">|</span>      <span class="dv">65</span><span class="sc">|</span>  <span class="fl">0.9538462</span><span class="sc">|</span> <span class="fl">4.825339</span><span class="sc">|</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="er">|</span>        <span class="dv">4</span><span class="sc">|</span>( island <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'Dream'</span>, <span class="st">'Torgersen'</span>) ) <span class="sc">&amp;</span> ( bill_length_mm <span class="sc">&lt;=</span> <span class="fl">44.1</span> ) <span class="sc">|</span>Adelie    <span class="sc">|</span>     <span class="dv">111</span><span class="sc">|</span>  <span class="fl">0.9459459</span><span class="sc">|</span> <span class="fl">2.140825</span><span class="sc">|</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="create-a-rulelist">Create a rulelist<a class="anchor" aria-label="anchor" href="#create-a-rulelist"></a></h3>


<p>A <code>rulelist</code> can be created using <code><a href="tidy.html">tidy()</a></code> on some supported model fits
(run: <code>utils::methods(tidy)</code>). It can also be created manually from a
existing dataframe using <a href="as_rulelist.data.frame.html">as_rulelist</a>.</p>
</div>

<div class="section">
<h3 id="keys-and-attributes">Keys and attributes<a class="anchor" aria-label="anchor" href="#keys-and-attributes"></a></h3>


<p>Columns identified as 'keys' along with <code>rule_nbr</code> form a unique
combination
-- a group of rules. For example, rule-based C5 model with multiple trials
creates rules per each <code>trial_nbr</code>. <code>predict</code> method understands 'keys',
thereby provides/predicts a rule number (for each row in new data / test
data) within the same <code>trial_nbr</code>.</p>
<p>A rulelist has these mandatory attributes:</p><ul><li><p><code>estimation_type</code>: One among <code>regression</code>, <code>classification</code></p>
<p>A rulelist has these optional attributes:</p></li>
<li><p><code>keys</code>: (character vector)Names of the column that forms a key.</p></li>
<li><p><code>model_type</code>: (string) Name of the model</p></li>
</ul><div class="section">
<h4 id="set-validation-data">Set Validation data<a class="anchor" aria-label="anchor" href="#set-validation-data"></a></h4>


<p>This helps a few methods like <a href="augment.html">augment</a>, <a href="calculate.html">calculate</a>, <a href="prune.html">prune</a>, <a href="reorder.html">reorder</a>
require few additional attributes which can be set using
<a href="set_validation_data.html">set_validation_data</a>.</p>
</div>

<div class="section">
<h4 id="methods-for-rulelist">Methods for rulelist<a class="anchor" aria-label="anchor" href="#methods-for-rulelist"></a></h4>

<ol><li><p><a href="predict.rulelist.html">Predict</a>: Given a dataframe (possibly without a
dependent variable column aka 'test data'), predicts the first rule (as
ordered in the rulelist) per 'keys' that is applicable for each row. When
<code>multiple = TRUE</code>, returns all rules applicable for a row (per key).</p></li>
<li><p><a href="augment.rulelist.html">Augment</a>: Outputs summary statistics per rule over
validation data and returns a rulelist with a new dataframe-column.</p></li>
<li><p><a href="calculate.rulelist.html">Calculate</a>: Computes metrics for a rulelist in a
cumulative manner such as <code>cumulative_coverage</code>, <code>cumulative_overlap</code>,
<code>cumulative_accuracy</code>.</p></li>
<li><p><a href="prune.rulelist.html">Prune</a>: Suggests pruning a rulelist such that some
expectation are met (based on metrics). Example: cumulative_coverage of 80%
can be met with a first few rules.</p></li>
<li><p><a href="reorder.rulelist.html">Reorder</a>: Reorders a rulelist in order to maximize a
metric.</p></li>
</ol></div>

<div class="section">
<h4 id="manipulating-a-rulelist">Manipulating a rulelist<a class="anchor" aria-label="anchor" href="#manipulating-a-rulelist"></a></h4>


<p>Rulelists are essentially dataframes. Hence, any dataframe operations which
preferably preserve attributes will output a rulelist. <a href="as_rulelist.html">as_rulelist</a> and
<a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a> will help in moving back and forth between rulelist and
dataframe worlds.</p>
</div>

<div class="section">
<h4 id="utilities-for-a-rulelist">Utilities for a rulelist<a class="anchor" aria-label="anchor" href="#utilities-for-a-rulelist"></a></h4>

<ol><li><p><a href="as_rulelist.data.frame.html">as_rulelist</a>: Create a <code>rulelist</code> from a
dataframe with some mandatory columns.</p></li>
<li><p><a href="set_keys.html">set_keys</a>: Set or Unset 'keys' of a <code>rulelist</code>.</p></li>
<li><p><a href="to_sql_case.html">to_sql_case</a>: Outputs a SQL case statement for a <code>rulelist</code>.</p></li>
<li><p><a href="convert_rule_flavor.html">convert_rule_flavor</a>: Converts <code>R</code>-parsable rule strings to python/SQL
parsable rule strings.</p></li>
</ol></div>

</div>

    </div>


    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>rulelist, <a href="tidy.html">tidy</a>, <a href="augment.rulelist.html">augment</a>,
<a href="predict.rulelist.html">predict</a>, <a href="calculate.rulelist.html">calculate</a>,
<a href="prune.rulelist.html">prune</a>, <a href="reorder.rulelist.html">reorder</a></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Srikanth Komala Sheshachala, Amith Kumar Ullur Raghavendra.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

